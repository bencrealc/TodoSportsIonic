{"version":3,"file":"src_app_pages_team_teamCreate_module_ts.js","mappings":"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","sources":["./src/app/pages/team/teamCreate.module.ts","./src/app/pages/team/teamCreate.page.ts","./src/app/pages/team/teams-routing.module.ts","./src/app/services/auth/user-route-access.service.ts","./src/app/services/team/team.model.ts","./src/app/services/team/team.service.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormBuilder, ReactiveFormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TeamCreatePageRoutingModule } from './teams-routing.module';\r\n\r\nimport { TeamCreatePage } from './teamCreate.page';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, ReactiveFormsModule, IonicModule, TeamCreatePageRoutingModule, TranslateModule],\r\n  declarations: [TeamCreatePage],\r\n  providers: [FormBuilder],\r\n})\r\nexport class TeamCreatePageModule {}\r\n","import { Component, OnInit } from '@angular/core';\nimport { NavController, ToastController } from '@ionic/angular';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Observable } from 'rxjs';\nimport { EventsService } from 'src/app/services/events/events.service';\nimport { finalize } from 'rxjs/operators';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { TeamService } from 'src/app/services/team/team.service';\nimport { Team } from 'src/app/services/team/team.model';\nimport { AccountService } from 'src/app/services/auth/account.service';\nimport { Account } from 'src/model/account.model';\nimport { Router, RouterModule } from '@angular/router';\nimport { ScreenOrientation } from '@awesome-cordova-plugins/screen-orientation/ngx';\n\n@Component({\n  selector: 'app-teamCreate',\n  templateUrl: './teamCreate.page.html',\n  styleUrls: ['./teamCreate.page.scss'],\n})\nexport class TeamCreatePage implements OnInit {\n  isSaving = false;\n  isSubmitted = false;\n  private team: FormGroup;\n  account: Account;\n\n  constructor(\n    public teamService: TeamService,\n    public navController: NavController,\n    public toastController: ToastController,\n    public translateService: TranslateService,\n    private router: Router,\n    private accountService: AccountService,\n    private screenOrientation: ScreenOrientation,\n    protected fb: FormBuilder\n  ) {\n    this.screenOrientation.lock(this.screenOrientation.ORIENTATIONS.PORTRAIT);\n    this.team = this.fb.group({\n      name: [''],\n    });\n  }\n\n  ngOnInit() {\n    this.team = this.fb.group({\n      name: ['', [Validators.required, Validators.minLength(3)]],\n    });\n    this.accountService.identity().then(account => {\n      if (account != null) {\n        this.account = account;\n      }\n    });\n  }\n\n  get errorControl() {\n    return this.team.controls;\n  }\n\n  async save() {\n    const toastCreado = await this.toastController.create({\n      message: 'El equipo ha sido creado',\n      duration: 2000,\n      position: 'top',\n      color: 'light',\n    });\n    this.isSaving = true;\n    this.isSubmitted = true;\n    if (!this.team.valid) {\n      console.log('Please provide all the required values!');\n      return false;\n    } else {\n      toastCreado.present();\n    }\n    const team = this.createFrom(this.team.value['name'], this.account.id);\n    this.subscribeToSaveResponse(this.teamService.create(team));\n    if (this.isSubmitted) {\n      this.team.reset();\n    }\n  }\n\n  protected subscribeToSaveResponse(result: Observable<ArrayBuffer>): void {\n    result.pipe(finalize(() => this.onSaveFinalize())).subscribe({\n      next: () => this.onSaveSuccess(),\n      error: () => this.onSaveError(),\n    });\n  }\n\n  protected createFrom(name, userId): Team {\n    return {\n      ...new Team(),\n      name: name,\n      userId: userId,\n    };\n  }\n\n  protected onSaveSuccess(): void {}\n\n  protected onSaveError(): void {\n    // Api for inheritance.\n  }\n\n  protected onSaveFinalize(): void {}\n}\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { UserRouteAccessService } from 'src/app/services/auth/user-route-access.service';\r\n\r\nimport { TeamCreatePage } from './teamCreate.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: TeamCreatePage,\r\n    data: {\r\n      authorities: ['ROLE_USER'],\r\n    },\r\n    canActivate: [UserRouteAccessService],\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class TeamCreatePageRoutingModule {}\r\n","import { Injectable, isDevMode } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot } from '@angular/router';\r\nimport { NavController } from '@ionic/angular';\r\nimport { AccountService } from './account.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class UserRouteAccessService implements CanActivate {\r\n  constructor(\r\n    private router: Router,\r\n    private navController: NavController,\r\n    private accountService: AccountService // private stateStorageService: StateStorageService\r\n  ) {}\r\n\r\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean | Promise<boolean> {\r\n    const authorities = route.data['authorities'];\r\n    // We need to call the checkLogin / and so the accountService.identity() function, to ensure,\r\n    // that the client has a principal too, if they already logged in by the server.\r\n    // This could happen on a page refresh.\r\n    return this.checkLogin(authorities, state.url);\r\n  }\r\n\r\n  checkLogin(authorities: string[], url: string): Promise<boolean> {\r\n    return this.accountService.identity().then(account => {\r\n      if (!authorities || authorities.length === 0) {\r\n        return true;\r\n      }\r\n\r\n      if (account) {\r\n        const hasAnyAuthority = this.accountService.hasAnyAuthority(authorities);\r\n        if (hasAnyAuthority) {\r\n          return true;\r\n        }\r\n        if (isDevMode()) {\r\n          console.error('User has not any of required authorities: ', authorities);\r\n        }\r\n        return false;\r\n      }\r\n\r\n      // this.stateStorageService.storeUrl(url);\r\n      // this.router.navigate(['accessdenied']).then(() => {\r\n      //     // only show the login dialog, if the user hasn't logged in yet\r\n      //     if (!account) {\r\n      //         // this.loginModalService.open();\r\n      //         console.log('go to login page');\r\n      //     }\r\n      // });\r\n      this.navController.navigateRoot('/accessdenied');\r\n\r\n      return false;\r\n    });\r\n  }\r\n}\r\n","import { Match } from '../match/match.model';\r\n\r\nexport class Team {\r\n  public id?: number;\r\n  public name?: string;\r\n  public matches?: Match[];\r\n  public userId?: number;\r\n\r\n  constructor(id?: number, name?: string, matches?: Match[], userId?: number) {\r\n    this.id = id ? id : null;\r\n    this.name = name ? name : null;\r\n    this.matches = matches ? matches : null;\r\n    this.userId = userId ? userId : null;\r\n  }\r\n}\r\n","import { HttpClient, HttpResponse } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { ApiService } from '../api/api.service';\r\nimport { Team } from './team.model';\r\nimport { environment } from 'src/environments/environment';\r\n\r\nexport type EntityArrayResponseType = HttpResponse<Team[]>;\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class TeamService {\r\n  constructor(public http: HttpClient, public apiService: ApiService) {}\r\n\r\n  public static API_URL = environment.apiUrl;\r\n\r\n  create(team) {\r\n    return this.apiService.post('teams', team, { observe: 'response' });\r\n  }\r\n  get() {\r\n    return this.http.get<Team[]>(ApiService.API_URL + '/teams', { observe: 'response' });\r\n  }\r\n\r\n  getById(id) {\r\n    return this.http.get<Team>(ApiService.API_URL + '/teams/' + id, { observe: 'response' });\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}